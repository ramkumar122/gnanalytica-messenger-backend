import { io } from "socket.io-client";

const token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MDRmNTM2OTNmZjcyMTZmMjhiYjMxZiIsImlhdCI6MTc2MTkzMzg5MCwiZXhwIjoxNzY0NTI1ODkwfQ.K7C5dhZaNvCjDcuKmCS7XsZXEOg9XwNmOLfJeYYeBVo"
const conversationId = "6908e46502028e5747844f74";
const socket = io("http://localhost:3000", {
  auth: { token },
});

socket.on("connect", () => {
  console.log("connected", socket.id);
  socket.emit("conversation:join", conversationId);

  // send a test message
  socket.emit("message:send", { conversationId, text: "Hello from socket!" });
});

socket.on("message:delivered", (payload) => {
  console.log("âœ… Delivered to conversation:", payload);
});

socket.on("message:seen", (payload) => {
  console.log("ğŸ‘€ Seen by user:", payload);
});

socket.on("message:new", (payload) => console.log("message:new", payload));
socket.on("conv:unread", (payload) => console.log("conv:unread", payload));
socket.on("presence:update", (p) => console.log("presence", p));
socket.on("typing:update", (p) => console.log("typing", p));
socket.on("disconnect", () => console.log("disconnected"));
socket.on("message:delivered", (payload) => {
  console.log("âœ… Delivered to conversation:", payload);
});

socket.on("message:seen", (payload) => {
  console.log("ğŸ‘€ Seen by user:", payload);
});